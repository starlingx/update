---
- project:
    templates:
      - publish-stx-docs
      - stx-api-ref-jobs
      - stx-release-notes-jobs
    check:
      jobs:
        - flock-devstack-update
        - openstack-tox-linters
        - patch-tox-flake8
        - patch-tox-pylint
        - patch-tox-py27
        - patch-tox-py36
        - patch-alarm-tox-flake8
        - patch-alarm-tox-pylint
        - patch-alarm-tox-py27
        - patch-alarm-tox-py36
    gate:
      jobs:
        - flock-devstack-update
        - openstack-tox-linters
        - patch-tox-flake8
        - patch-tox-pylint
        - patch-tox-py27
        - patch-tox-py36
        - patch-alarm-tox-flake8
        - patch-alarm-tox-pylint
        - patch-alarm-tox-py27
        - patch-alarm-tox-py36

- job:
    name: patch-tox-flake8
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - cgcs-patch/cgcs-patch/*
    vars:
      tox_envlist: flake8
      tox_extra_args: -c cgcs-patch/cgcs-patch/tox.ini

- job:
    name: patch-tox-pylint
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - cgcs-patch/cgcs-patch/*
    vars:
      tox_envlist: pylint
      tox_extra_args: -c cgcs-patch/cgcs-patch/tox.ini

- job:
    name: patch-tox-py27
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - cgcs-patch/cgcs-patch/*
    vars:
      tox_envlist: py27
      tox_extra_args: -c cgcs-patch/cgcs-patch/tox.ini

- job:
    name: patch-tox-py36
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - cgcs-patch/cgcs-patch/*
    vars:
      tox_envlist: py36
      tox_extra_args: -c cgcs-patch/cgcs-patch/tox.ini

- job:
    name: patch-alarm-tox-flake8
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - patch-alarm/patch-alarm/*
    vars:
      tox_envlist: flake8
      tox_extra_args: -c patch-alarm/patch-alarm/tox.ini

- job:
    name: patch-alarm-tox-pylint
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - patch-alarm/patch-alarm/*
    vars:
      tox_envlist: pylint
      tox_extra_args: -c patch-alarm/patch-alarm/tox.ini

- job:
    name: patch-alarm-tox-py27
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - patch-alarm/patch-alarm/*
    vars:
      tox_envlist: py27
      tox_extra_args: -c patch-alarm/patch-alarm/tox.ini

- job:
    name: patch-alarm-tox-py36
    parent: tox
    required-projects:
      - starlingx/config
      - starlingx/fault
    files:
      - patch-alarm/patch-alarm/*
    vars:
      tox_envlist: py36
      tox_extra_args: -c patch-alarm/patch-alarm/tox.ini

- job:
    name: flock-devstack-update
    parent: flock-devstack-base-min
    required-projects:
      - starlingx/integ
    vars:
      tox_envlist: functional
      devstack_services:
        # StarlingX services
        sw-patch: true
      devstack_plugins:
        # integ: https://opendev.org/starlingx/integ
        update: https://opendev.org/starlingx/update
